{"version":3,"sources":["js/slickGrid.ts"],"names":[],"mappings":"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","file":"slickGrid.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n\r\nimport {\r\n    Component, Input, Output, Inject, forwardRef, OnChanges, OnInit, OnDestroy, ElementRef, SimpleChange, EventEmitter,\r\n    ViewEncapsulation, HostListener, AfterViewInit\r\n} from '@angular/core';\r\nimport { Observable, Subscription } from 'rxjs/Rx';\r\nimport { IObservableCollection, CollectionChange, ISlickColumn } from './interfaces';\r\n\r\ndeclare let Slick;\r\n\r\n////////// Interfaces /////////////////////////////////////////////////////////\r\n\r\ninterface ISlickGridData {\r\n    // https://github.com/mleibman/SlickGrid/wiki/DataView\r\n    getLength(): number;\r\n    getItem(index: number): any;\r\n    getRange(start: number, end: number): any; // only available in the forked SlickGrid\r\n    getItemMetadata(index: number): any;\r\n}\r\n\r\n////////// Text Editors ///////////////////////////////////////////////////////\r\n\r\nexport function getOverridableTextEditorClass(grid: SlickGrid): any {\r\n    class OverridableTextEditor {\r\n        private _textEditor: any;\r\n        public keyCaptureList: number[];\r\n\r\n        constructor(private _args: any) {\r\n            this._textEditor = new Slick.Editors.Text(_args);\r\n            const END = 35;\r\n            const HOME = 36;\r\n\r\n            // These are the special keys the text editor should capture instead of letting\r\n            // the grid handle them\r\n            this.keyCaptureList = [END, HOME];\r\n        }\r\n\r\n        destroy(): void {\r\n            this._textEditor.destroy();\r\n        }\r\n\r\n        focus(): void {\r\n            this._textEditor.focus();\r\n        }\r\n\r\n        getValue(): string {\r\n            return this._textEditor.getValue();\r\n        }\r\n\r\n        setValue(val): void {\r\n            this._textEditor.setValue(val);\r\n        }\r\n\r\n        loadValue(item, rowNumber): void {\r\n            if (grid.overrideCellFn) {\r\n                let overrideValue = grid.overrideCellFn(rowNumber, this._args.column.id, item[this._args.column.id]);\r\n                if (overrideValue !== undefined) {\r\n                    item[this._args.column.id] = overrideValue;\r\n                }\r\n            }\r\n            this._textEditor.loadValue(item);\r\n        }\r\n\r\n        serializeValue(): string {\r\n            return this._textEditor.serializeValue();\r\n        }\r\n\r\n        applyValue(item, state): void {\r\n            let activeRow = grid.activeCell.row;\r\n            let currentRow = grid.dataRows.at(activeRow);\r\n            let colIndex = grid.getColumnIndex(this._args.column.name);\r\n            let dataLength: number = grid.dataRows.getLength();\r\n\r\n            // If this is not the \"new row\" at the very bottom\r\n            if (activeRow !== dataLength) {\r\n                currentRow[colIndex] = state;\r\n                this._textEditor.applyValue(item, state);\r\n            }\r\n        }\r\n\r\n        isValueChanged(): boolean {\r\n            return this._textEditor.isValueChanged();\r\n        }\r\n\r\n        validate(): any {\r\n            let activeRow = grid.activeCell.row;\r\n            let result: any = { valid: true, msg: undefined };\r\n            let colIndex: number = grid.getColumnIndex(this._args.column.name);\r\n            let newValue: any = this._textEditor.getValue();\r\n\r\n            // TODO: It would be nice if we could support the isCellEditValid as a promise\r\n            if (grid.isCellEditValid && !grid.isCellEditValid(activeRow, colIndex, newValue)) {\r\n                result.valid = false;\r\n            }\r\n\r\n            return result;\r\n        }\r\n    }\r\n\r\n    return OverridableTextEditor;\r\n}\r\n\r\n////////// Implementation /////////////////////////////////////////////////////\r\n\r\n@Component({\r\n    selector: 'slick-grid',\r\n    template: '<div class=\"grid\" (window:resize)=\"onResize()\"></div>',\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class SlickGrid implements OnChanges, OnInit, OnDestroy, AfterViewInit {\r\n\r\n    @Input() columnDefinitions: ISlickColumn<any>[];\r\n    @Input() dataRows: IObservableCollection<{}>;\r\n    @Input() resized: Observable<any>;\r\n    @Input() highlightedCells: { row: number, column: number }[] = [];\r\n    @Input() blurredColumns: string[] = [];\r\n    @Input() contextColumns: string[] = [];\r\n    @Input() columnsLoading: string[] = [];\r\n    @Input() showHeader: boolean = true;\r\n    @Input() enableColumnReorder: boolean = false;\r\n    @Input() enableAsyncPostRender: boolean = false;\r\n    @Input() selectionModel: string | Slick.SelectionModel<any, any> = '';\r\n    @Input() plugins: Array<string | Slick.Plugin<any>> = [];\r\n    @Input() enableEditing: boolean = false;\r\n    @Input() topRowNumber: number;\r\n\r\n    @Input() overrideCellFn: (rowNumber, columnId, value?, data?) => string;\r\n    @Input() isCellEditValid: (row: number, column: number, newValue: any) => boolean;\r\n    @Input() onBeforeAppendCell: (row: number, column: number) => string;\r\n\r\n    @Output() loadFinished: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n    // SLickGrid Events\r\n    @Output() onContextMenu: EventEmitter<Slick.EventData> = new EventEmitter<Slick.EventData>();\r\n    @Output() onScroll: EventEmitter<Slick.OnScrollEventArgs<any>> = new EventEmitter<Slick.OnScrollEventArgs<any>>();\r\n    @Output() onActiveCellChanged: EventEmitter<Slick.OnActiveCellChangedEventArgs<any>> = new EventEmitter<Slick.OnActiveCellChangedEventArgs<any>>();\r\n    @Output() onBeforeEditCell: EventEmitter<Slick.OnBeforeEditCellEventArgs<any>> = new EventEmitter<Slick.OnBeforeEditCellEventArgs<any>>();\r\n    @Output() onCellChange: EventEmitter<Slick.OnCellChangeEventArgs<any>> = new EventEmitter<Slick.OnCellChangeEventArgs<any>>();\r\n    @Output() onRendered: EventEmitter<Slick.OnRenderedEventArgs<any>> = new EventEmitter<Slick.OnRenderedEventArgs<any>>();\r\n\r\n    @HostListener('focus')\r\n    onFocus(): void {\r\n        if (this._grid) {\r\n            this._grid.focus();\r\n        }\r\n    }\r\n\r\n    @Input() public set rowHeight(val: number) {\r\n        this._rowHeight = val;\r\n        if (this._grid) {\r\n            this._grid.setOptions({ rowHeight: this.rowHeight });\r\n        }\r\n    }\r\n\r\n    public get rowHeight(): number {\r\n        return this._rowHeight;\r\n    }\r\n\r\n    private _rowHeight = 29;\r\n    private _grid: Slick.Grid<any>;\r\n    private _gridColumns: ISlickColumn<any>[];\r\n    private _columnNameToIndex: any;\r\n    private _gridData: ISlickGridData;\r\n    private _resizeSubscription: Subscription;\r\n    private _gridSyncSubscription: Subscription;\r\n\r\n    ////////// Constructor and Angular functions //////////////////////////////\r\n\r\n    constructor(@Inject(forwardRef(() => ElementRef)) private _el) {\r\n        this._gridData = {\r\n            getLength: (): number => {\r\n                return this.dataRows && this._gridColumns ? this.dataRows.getLength() : 0;\r\n            },\r\n            getItem: (index): any => {\r\n                return !this.dataRows ? undefined : this.dataRows.at(index);\r\n            },\r\n            getRange: (start, end): any => {\r\n                return !this.dataRows ? undefined : this.dataRows.getRange(start, end);\r\n            },\r\n            getItemMetadata: undefined\r\n        };\r\n    }\r\n\r\n    ngOnChanges(changes: { [propName: string]: SimpleChange }): void {\r\n        let columnDefinitionChanges = changes['columnDefinitions'];\r\n        let activeCell = this._grid ? this._grid.getActiveCell() : undefined;\r\n        let hasGridStructureChanges = false;\r\n        let wasEditing = this._grid ? !!this._grid.getCellEditor() : false;\r\n\r\n        if (columnDefinitionChanges\r\n            && !_.isEqual(columnDefinitionChanges.previousValue, columnDefinitionChanges.currentValue)) {\r\n            this.updateSchema();\r\n            if (!this._grid) {\r\n                this.initGrid();\r\n            } else {\r\n                this._grid.resetActiveCell();\r\n                this._grid.setColumns(this._gridColumns);\r\n            }\r\n            hasGridStructureChanges = true;\r\n\r\n            if (!columnDefinitionChanges.currentValue || columnDefinitionChanges.currentValue.length === 0) {\r\n                activeCell = undefined;\r\n            }\r\n            if (activeCell) {\r\n                let columnThatContainedActiveCell = columnDefinitionChanges.previousValue[Math.max(activeCell.cell - 1, 0)];\r\n                let newActiveColumnIndex = columnThatContainedActiveCell\r\n                    ? columnDefinitionChanges.currentValue.findIndex(c => c.id === columnThatContainedActiveCell.id)\r\n                    : -1;\r\n                activeCell.cell = newActiveColumnIndex !== -1 ? newActiveColumnIndex + 1 : 0;\r\n            }\r\n        }\r\n\r\n        if (changes['dataRows']\r\n            || (changes['highlightedCells'] && !_.isEqual(changes['highlightedCells'].currentValue, changes['highlightedCells'].previousValue))\r\n            || (changes['blurredColumns'] && !_.isEqual(changes['blurredColumns'].currentValue, changes['blurredColumns'].previousValue))\r\n            || (changes['columnsLoading'] && !_.isEqual(changes['columnsLoading'].currentValue, changes['columnsLoading'].previousValue))) {\r\n            this.setCallbackOnDataRowsChanged();\r\n            this._grid.updateRowCount();\r\n            this._grid.setColumns(this._grid.getColumns());\r\n            this._grid.invalidateAllRows();\r\n            this._grid.render();\r\n            hasGridStructureChanges = true;\r\n        }\r\n\r\n        if (hasGridStructureChanges) {\r\n            if (activeCell) {\r\n                this._grid.setActiveCell(activeCell.row, activeCell.cell);\r\n            } else {\r\n                this._grid.resetActiveCell();\r\n            }\r\n        }\r\n\r\n        if (wasEditing && hasGridStructureChanges) {\r\n            this._grid.editActiveCell();\r\n        }\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        // ngOnInit() will be called *after* the first time ngOnChanges() is called\r\n        // so, grid must be there already\r\n        if (this.topRowNumber === undefined) {\r\n            this.topRowNumber = 0;\r\n        }\r\n        if (this.dataRows && this.dataRows.getLength() > 0) {\r\n            this._grid.scrollRowToTop(this.topRowNumber);\r\n        }\r\n\r\n        if (this.resized) {\r\n            // Re-rendering the grid is expensive. Throttle so we only do so every 100ms.\r\n            this.resized.throttleTime(100)\r\n                .subscribe(() => this.onResize());\r\n        }\r\n\r\n        // subscribe to slick events\r\n        // https://github.com/mleibman/SlickGrid/wiki/Grid-Events\r\n        this.setupEvents();\r\n    }\r\n\r\n    ngAfterViewInit(): void {\r\n        this.loadFinished.emit();\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        if (this._resizeSubscription !== undefined) {\r\n            this._resizeSubscription.unsubscribe();\r\n        }\r\n        if (this._gridSyncSubscription !== undefined) {\r\n            this._gridSyncSubscription.unsubscribe();\r\n        }\r\n    }\r\n\r\n    ////////// Public functions  - Add public API functions here //////////////\r\n\r\n    // Enables editing on the grid\r\n    public enterEditSession(): void {\r\n        this.changeEditSession(true);\r\n    }\r\n\r\n    // Disables editing on the grid\r\n    public endEditSession(): void {\r\n        this.changeEditSession(false);\r\n    }\r\n\r\n    // Called whenever the grid's selected rows change\r\n    // Event args: { rows: number[] }\r\n    public get onSelectedRowsChanged(): Slick.Event<Slick.OnSelectedRowsChangedEventArgs<any>> {\r\n        return this._grid.onSelectedRowsChanged;\r\n    }\r\n\r\n    // Returns an array of row indices corresponding to the currently selected rows.\r\n    public getSelectedRows(): number[] {\r\n        return this._grid.getSelectedRows();\r\n    }\r\n\r\n    // Gets the column index of the column with the given name\r\n    public getColumnIndex(name: string): number {\r\n        return this._columnNameToIndex[name];\r\n    }\r\n\r\n    // Gets a ISlickRange corresponding to the current selection on the grid\r\n    public getSelectedRanges(): Slick.Range[] {\r\n        let selectionModel = this._grid.getSelectionModel();\r\n        if (selectionModel && selectionModel.getSelectedRanges) {\r\n            return selectionModel.getSelectedRanges();\r\n        }\r\n    }\r\n\r\n    // Registers a Slick plugin with the given name\r\n    public registerPlugin(plugin: Slick.Plugin<any> | string): void {\r\n        if (typeof plugin === 'object') {\r\n            this._grid.registerPlugin(plugin);\r\n        } else if (typeof plugin === 'string' && Slick[plugin] && typeof Slick[plugin] === 'function') {\r\n            this._grid.registerPlugin(new Slick[plugin]);\r\n        } else {\r\n            console.error(`Tried to register plugin ${plugin}, but none was found to be attached to Slick Grid or it was not a function.\r\n                        Please extend the Slick with the plugin as a function before registering`);\r\n        }\r\n    }\r\n\r\n    // Set this grid to be the active grid\r\n    public setActive(): void {\r\n        this._grid.setActiveCell(0, 1);\r\n    }\r\n\r\n    // Set the grid's selection\r\n    public set selection(ranges: Slick.Range[] | boolean) {\r\n        if (typeof ranges === 'boolean') {\r\n            if (ranges) {\r\n                let rows = [];\r\n                for (let i = 0; i < this._grid.getDataLength(); i++) {\r\n                    rows.push(i);\r\n                }\r\n                this._grid.setSelectedRows(rows);\r\n            } else {\r\n                this._grid.setSelectedRows([]);\r\n            }\r\n        } else {\r\n            let selectionModel = this._grid.getSelectionModel();\r\n            if (selectionModel && selectionModel.setSelectedRanges) {\r\n                selectionModel.setSelectedRanges(ranges);\r\n            }\r\n        }\r\n    }\r\n\r\n    ////////// Private functions //////////////////////////////////////////////\r\n\r\n    private initGrid(): void {\r\n        // https://github.com/mleibman/SlickGrid/wiki/Grid-Options\r\n        let options = {\r\n            enableCellNavigation: true,\r\n            enableColumnReorder: this.enableColumnReorder,\r\n            renderRowWithRange: true,\r\n            showHeader: this.showHeader,\r\n            rowHeight: this.rowHeight,\r\n            defaultColumnWidth: 120,\r\n            editable: this.enableEditing,\r\n            autoEdit: this.enableEditing,\r\n            enableAddRow: false, // TODO change when we support enableAddRow\r\n            enableAsyncPostRender: this.enableAsyncPostRender,\r\n            editorFactory: {\r\n                getEditor: (column: ISlickColumn<any>) => this.getColumnEditor(column)\r\n            },\r\n            formatterFactory: {\r\n                getFormatter: this.getFormatter\r\n            },\r\n            disableColumnBasedCellVirtualization: true,\r\n            enableInGridTabNavigation: false\r\n        };\r\n\r\n        this._grid = new Slick.Grid(\r\n            this._el.nativeElement.getElementsByClassName('grid')[0],\r\n            this._gridData,\r\n            this._gridColumns,\r\n            options);\r\n\r\n        if (this.selectionModel) {\r\n            if (typeof this.selectionModel === 'object') {\r\n                this._grid.setSelectionModel(this.selectionModel);\r\n            } else if (typeof this.selectionModel === 'string' && Slick[this.selectionModel] && typeof Slick[this.selectionModel] === 'function') {\r\n                this._grid.setSelectionModel(new Slick[this.selectionModel]());\r\n            } else {\r\n                console.error(`Tried to register selection model ${this.selectionModel},\r\n                                   but none was found to be attached to Slick Grid or it was not a function.\r\n                                   Please extend the Slick namespace with the selection model as a function before registering`);\r\n            }\r\n        }\r\n\r\n        for (let plugin of this.plugins) {\r\n            this.registerPlugin(plugin);\r\n        }\r\n\r\n        this._columnNameToIndex = {};\r\n        for (let i = 0; i < this._gridColumns.length; i++) {\r\n            this._columnNameToIndex[this._gridColumns[i].name] = i;\r\n        }\r\n\r\n        this.onResize();\r\n    }\r\n\r\n    private changeEditSession(enabled: boolean): void {\r\n        this.enableEditing = enabled;\r\n        let options: any = this._grid.getOptions();\r\n        options.editable = enabled;\r\n        options.enableAddRow = false; // TODO change to \" options.enableAddRow = false;\" when we support enableAddRow\r\n        this._grid.setOptions(options);\r\n    }\r\n\r\n    private onResize(): void {\r\n        if (this._grid !== undefined) {\r\n            // this will make sure the grid header and body to be re-rendered\r\n            this._grid.resizeCanvas();\r\n        }\r\n    }\r\n\r\n    private invalidateRange(start: number, end: number): void {\r\n        let refreshedRows = _.range(start, end);\r\n        this._grid.invalidateRows(refreshedRows, true);\r\n        this._grid.render();\r\n    }\r\n\r\n    private getColumnEditor(column: ISlickColumn<any>): any {\r\n        if (column.isEditable === false || typeof column.isEditable === 'undefined') {\r\n            return undefined;\r\n        }\r\n\r\n        let columnId = column.id;\r\n        let isColumnLoading = this.columnsLoading && this.columnsLoading.indexOf(columnId) !== -1;\r\n        let canEditColumn = columnId !== undefined && !isColumnLoading;\r\n        if (canEditColumn) {\r\n            return getOverridableTextEditorClass(this);\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    private getFormatter = (column: any): any => {\r\n        return (row, cell, value, columnDef, dataContext) => {\r\n            let columnId = cell > 0 && this.columnDefinitions.length > cell - 1 ? this.columnDefinitions[cell - 1].id : undefined;\r\n            if (columnId) {\r\n                let isHighlighted = this.highlightedCells && !!this.highlightedCells.find(c => c.row === row && c.column + 1 === cell);\r\n                let isColumnLoading = this.columnsLoading && this.columnsLoading.indexOf(columnId) !== -1;\r\n                let isShadowed = this.blurredColumns && !!this.blurredColumns.find(c => c === columnId);\r\n                let isContext = this.contextColumns && !!this.contextColumns.find(c => c === columnId);\r\n                let overrideValue = this.overrideCellFn && this.overrideCellFn(row, columnId, value, dataContext);\r\n\r\n                let valueToDisplay = (value + '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n                let cellClasses = 'grid-cell-value-container';\r\n\r\n                /* tslint:disable:no-null-keyword */\r\n                let valueMissing = value === undefined || value === null;\r\n                /* tslint:disable:no-null-keyword */\r\n                let isOverridden = overrideValue !== undefined && overrideValue !== null;\r\n\r\n                if (valueMissing && !isOverridden) {\r\n                    cellClasses += ' missing-value';\r\n                }\r\n\r\n                if (isColumnLoading === true && !isOverridden) {\r\n                    cellClasses += ' loading-cell';\r\n                    valueToDisplay = '';\r\n                }\r\n\r\n                if (isOverridden) {\r\n                    cellClasses += ' override-cell';\r\n                    valueToDisplay = overrideValue;\r\n                }\r\n\r\n                if (isContext) {\r\n                    cellClasses += ' context';\r\n                }\r\n\r\n                if (isHighlighted === true) {\r\n                    cellClasses += ' highlighted';\r\n                }\r\n\r\n                if (isShadowed && !isHighlighted && !isOverridden) {\r\n                    cellClasses += ' blurred';\r\n                }\r\n\r\n                return '<span title=\"' + valueToDisplay + '\" class=\"' + cellClasses + '\">' + valueToDisplay + '</span>';\r\n            }\r\n\r\n        };\r\n    }\r\n\r\n    private setupEvents(): void {\r\n        this._grid.onScroll.subscribe((e, args) => {\r\n            this.onScroll.emit(args);\r\n        });\r\n        this._grid.onCellChange.subscribe((e, args) => {\r\n            this.onCellChange.emit(args);\r\n        });\r\n        this._grid.onBeforeEditCell.subscribe((e, args) => {\r\n            this.onBeforeEditCell.emit(args);\r\n        });\r\n        // Subscribe to all active cell changes to be able to catch when we tab to the header on the next row\r\n        this._grid.onActiveCellChanged.subscribe((e, args) => {\r\n            // Emit that we've changed active cells\r\n            this.onActiveCellChanged.emit(args);\r\n        });\r\n        this._grid.onContextMenu.subscribe((e, args) => {\r\n            this.onContextMenu.emit(e);\r\n        });\r\n        this._grid.onBeforeAppendCell.subscribe((e, args) => {\r\n            // Since we need to return a string here, we are using calling a function instead of event emitter like other events handlers\r\n            return this.onBeforeAppendCell ? this.onBeforeAppendCell(args.row, args.cell) : undefined;\r\n        });\r\n        this._grid.onRendered.subscribe((e, args) => {\r\n            this.onRendered.emit(args);\r\n        });\r\n    }\r\n\r\n    private updateSchema(): void {\r\n        if (!this.columnDefinitions) {\r\n            return;\r\n        }\r\n\r\n        this._gridColumns = this.columnDefinitions;\r\n    }\r\n\r\n    private setCallbackOnDataRowsChanged(): void {\r\n        if (this.dataRows) {\r\n            // We must wait until we get the first set of dataRows before we enable editing or slickgrid will complain\r\n            if (this.enableEditing) {\r\n                this.enterEditSession();\r\n            }\r\n\r\n            this.dataRows.setCollectionChangedCallback((change: CollectionChange, startIndex: number, count: number) => {\r\n                this.renderGridDataRowsRange(startIndex, count);\r\n            });\r\n        }\r\n    }\r\n\r\n    public get activeCell(): Slick.Cell {\r\n        return this._grid.getActiveCell();\r\n    }\r\n\r\n    private renderGridDataRowsRange(startIndex: number, count: number): void {\r\n        let editor = this._grid.getCellEditor();\r\n        let oldValue = editor ? editor.getValue() : undefined;\r\n        let wasValueChanged = editor ? editor.isValueChanged() : false;\r\n        this.invalidateRange(startIndex, startIndex + count);\r\n        let activeCell = this.activeCell;\r\n        if (editor && activeCell.row >= startIndex && activeCell.row < startIndex + count) {\r\n            if (oldValue && wasValueChanged) {\r\n                editor.setValue(oldValue);\r\n            }\r\n        }\r\n    }\r\n\r\n    /* andresse: commented out 11/1/2016 due to minification issues\r\n    private get finishGridEditingFn(): (e: any, args: any) => void {\r\n        if (this._finishGridEditingFn === undefined) {\r\n            this._finishGridEditingFn = ((e: any, args: any) => {\r\n                if (e.ctrlKey === true\r\n                    && e.keyCode === 13\r\n                    && this.editableColumnIds\r\n                    && this.editableColumnIds.find(id => id === args.columnDef.id)) {\r\n                    // pressed [Ctrl + Enter] in the editing area\r\n                    this.editingFinished.next(undefined);\r\n                }\r\n            }).bind(this);\r\n        }\r\n\r\n        return this._finishGridEditingFn;\r\n    }\r\n    */\r\n}\r\n"]}